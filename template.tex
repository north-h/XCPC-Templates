\documentclass[10pt,a4paper]{article}
%\usepackage{zh_CN-Adobefonts_external}
\usepackage{xeCJK}
\usepackage{amsmath, amsthm}
\usepackage{listings,xcolor}
\usepackage{geometry} % 设置页边距
\usepackage{fontspec}
\usepackage{graphicx}
\usepackage[colorlinks]{hyperref}
\usepackage{setspace}
\usepackage{fancyhdr} % 自定义页眉页脚


\setsansfont{Consolas} % 设置英文字体
\setmonofont[Mapping={}]{Consolas} % 英文引号之类的正常显示，相当于设置英文字体

\linespread{1.2}

\title{Template For XCPC}
\author{north- @ SMU}
\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\pagestyle{fancy}

\lhead{\CJKfamily{kai} SMU} %以下分别为左中右的页眉和页脚
\chead{}

\rhead{\CJKfamily{kai} 第 \thepage 页}
\lfoot{} 
\cfoot{\thepage}
\rfoot{}
\renewcommand{\headrulewidth}{0.4pt} 
\renewcommand{\footrulewidth}{0.4pt}
%\geometry{left=2.5cm,right=3cm,top=2.5cm,bottom=2.5cm} % 页边距
\geometry{left=3.18cm,right=3.18cm,top=2.54cm,bottom=2.54cm}
\setlength{\columnsep}{30pt}

\makeatletter

\makeatother



\lstset{
    language    = c++,
    numbers     = left,
    numberstyle={                               % 设置行号格式
        \small
        \color{black}
        \fontspec{Consolas}
    },
    commentstyle = \color[RGB]{0,128,0}\bfseries, %代码注释的颜色
    keywordstyle={                              % 设置关键字格式
        \color[RGB]{40,40,255}
        \fontspec{Consolas Bold}
        \bfseries
    },
    stringstyle={                               % 设置字符串格式
        \color[RGB]{128,0,0}
        \fontspec{Consolas}
        \bfseries
    },
    basicstyle={                                % 设置代码格式
        \fontspec{Consolas}
        \small\ttfamily
    },
    emphstyle=\color[RGB]{112,64,160},          % 设置强调字格式
    breaklines=true,                            % 设置自动换行
    tabsize     = 4,
    frame       = single,%主题
    columns     = fullflexible,
    rulesepcolor = \color{red!20!green!20!blue!20}, %设置边框的颜色
    showstringspaces = false, %不显示代码字符串中间的空格标记
    escapeinside={\%*}{*)},
}

\begin{document}
\title{XCPC - Templates}
\author {north-h}
\date{}
\maketitle
\tableofcontents
\newpage
\section{数据结构}
\subsection{树状数组（单点修改，区间查询）}
\lstinputlisting{数据结构/树状数组（单点修改，区间查询）.cpp}
\subsection{树状数组（区间修改，单点查询）}
\lstinputlisting{数据结构/树状数组（区间修改，单点查询）.cpp}
\subsection{树状数组（区间修改，区间查询）}
\lstinputlisting{数据结构/树状数组（区间修改，区间查询）.cpp}
\subsection{线段树}
\lstinputlisting{数据结构/线段树.cpp}
\subsection{ST表}
\lstinputlisting{数据结构/ST表.cpp}
\subsection{二维树状数组}
\lstinputlisting{数据结构/二维树状数组.cpp}
\subsection{并查集}
\lstinputlisting{数据结构/并查集.cpp}
\section{字符串}
\section{杂项}
\subsection{快读快写}
\lstinputlisting{杂项/快读快写.cpp}
\subsection{取模}
\lstinputlisting{杂项/取模.cpp}
\section{数学}
\subsection{组合数（递推）}
\lstinputlisting{数学/组合数（递推）.cpp}
\subsection{组合数（逆元）}
\lstinputlisting{数学/组合数（逆元）.cpp}
\section{Kescholar}
\subsection{BIT}
\lstinputlisting{Kescholar/BIT.cpp}
\subsection{Dijkstra}
\lstinputlisting{Kescholar/Dijkstra.cpp}
\subsection{Dijkstra进阶}
\lstinputlisting{Kescholar/Dijkstra进阶.cpp}
\subsection{eulerrange}
\lstinputlisting{Kescholar/eulerrange.cpp}
\subsection{hashpair}
\lstinputlisting{Kescholar/hashpair.cpp}
\subsection{KMP}
\lstinputlisting{Kescholar/KMP.cpp}
\subsection{ksm}
\lstinputlisting{Kescholar/ksm.cpp}
\subsection{LCA}
\lstinputlisting{Kescholar/LCA.cpp}
\subsection{Matrix}
\lstinputlisting{Kescholar/Matrix.cpp}
\subsection{phi}
\lstinputlisting{Kescholar/phi.cpp}
\subsection{Prim}
\lstinputlisting{Kescholar/Prim.cpp}
\subsection{ST}
\lstinputlisting{Kescholar/ST.cpp}
\subsection{toposort}
\lstinputlisting{Kescholar/toposort.cpp}
\subsection{trie}
\lstinputlisting{Kescholar/trie.cpp}
\subsection{并查集}
\lstinputlisting{Kescholar/并查集.cpp}
\subsection{二叉搜索树}
\lstinputlisting{Kescholar/二叉搜索树.cpp}
\subsection{二分图最大匹配}
\lstinputlisting{Kescholar/二分图最大匹配.cpp}
\subsection{二维坐标离散化}
\lstinputlisting{Kescholar/二维坐标离散化.cpp}
\subsection{区间素数筛}
\lstinputlisting{Kescholar/区间素数筛.cpp}
\subsection{树状数组区间查询单点修改}
\lstinputlisting{Kescholar/树状数组区间查询单点修改.cpp}
\end{document}